<!doctype html>
<html lang="pt">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>Pwned Antifas</title>
    <script src="app.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>Checar se fui exposto no dossiê de Anti-fascistas</h1>
      <p>No dia 3 de junho de 2020, ficamos sabendo que um dossiê com possíveis anti-fascistas foi exposto na internet.</p>
      <p>A partir do documento PDF obtido, construímos uma lista de <em>hashes</em> a partir dos nomes mencionados,
      de forma que apenas os <em>hashes</em> estão disponibilizados nessa página. Embora o nome completo seja solicitado
      a seguir, o mesmo não é trafegado na internet, muito menos exposto a outros serviços.</p>

      <h2>Informe o seu nome completo</h2>
      <p>A partir do seu nome completo é criado um <em>hash</em> (com o algoritmo SHA-512) para verificarmos se o mesmo se encontra na base de <em>hashes</em>.</p>
      <p>Seu nome não será exposto ou enviado através da internet. Os <em>hashes</em> para análise já se encontram nesta página.</p>
      <div id="pwned-antifas"></div>

      <h2>Por que <em>hashes</em>?</h2>
      <p>Esse site não contém os dados presentes no dossiê, somente parte dos hashes dos nomes.</p>
      <p>Isso garante que a publicação desse site não exponha as pessoas a um risco ainda maior.</p>
      <p>O algoritmo usado foi o <a href="https://pt.wikipedia.org/wiki/SHA-2"><code>SHA-512</code></a>, o qual garante que os nomes sejam ofuscados e sejam carregados nessa página de forma anônima.</p>
      <p>Essa é a única forma de garantir que seus dados não estão sendo compartilhados de forma imprópria, mas, sim, de forma segura e anônima.</p>

      <h2>O código é aberto?</h2>
      <p><a href="https://github.com/cuducos/pwned-antifas">Sim</a>! Embora o PDF do dossiê não seja exposto, para não dar mais visibilidade e expor ainda mais as pessoas mencionadas,
      você pode conferir como essa ferramenta foi criada e auditar (ou modificar) <a href="https://github.com/cuducos/pwned-antifas">a solução proposta</a>.</p>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha512/0.8.0/sha512.min.js" integrity="sha256-vmT+cGA/37TLJdcbn/L89qtu3RA/LEozREmaqY+pg4E=" crossorigin="anonymous"></script>
    <script>
      var app = Elm.Main.init({
        node: document.getElementById('pwned-antifas'),
        flags: [null]
      });

      app.ports.requestHash.subscribe(function(message) {
        console.log("received: " + message);
        console.log("sending: " + sha512(message));
        app.ports.receiveHash.send(sha512(message));
      });
    </script>
  </body>
</html>
